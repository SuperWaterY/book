{"version":3,"file":"221-2adab8.js","mappings":"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","sources":["webpack://TopWritePlugins.theme-default/./src/scss/body.module.scss","webpack://TopWritePlugins.theme-default/./src/scss/summary.module.scss","webpack://TopWritePlugins.theme-default/./.topwrite/use-config.ts","webpack://TopWritePlugins.theme-default/./src/components/summary.tsx","webpack://TopWritePlugins.theme-default/./src/scss/search.module.scss","webpack://TopWritePlugins.theme-default/./src/components/search.tsx","webpack://TopWritePlugins.theme-default/./src/components/sidebar.tsx","webpack://TopWritePlugins.theme-default/./src/scss/main.module.scss","webpack://TopWritePlugins.theme-default/./src/components/document.tsx","webpack://TopWritePlugins.theme-default/./src/components/body.tsx","webpack://TopWritePlugins.theme-default/./src/scss/head.module.scss","webpack://TopWritePlugins.theme-default/./src/components/head.tsx","webpack://TopWritePlugins.theme-default/./src/components/root.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"body\":\"body--4cb30f26\",\"sidebar\":\"sidebar--92cdcd4d\",\"header\":\"header--fbbaa9f2\",\"title\":\"title--8b08af4e\",\"search\":\"search--783540ff\",\"copyright\":\"copyright--2aa57f2d\",\"with-head\":\"with-head--416eb2f1\",\"withHead\":\"with-head--416eb2f1\",\"with-sidebar\":\"with-sidebar--64a35dd2\",\"withSidebar\":\"with-sidebar--64a35dd2\"};","// extracted by mini-css-extract-plugin\nexport default {\"summary\":\"summary--54538abb\",\"part\":\"part--2f00bd41\",\"title\":\"title--3df1ba16\",\"item\":\"item--9cbf6482\",\"whole\":\"whole--9f70f484\",\"space\":\"space--8603ccbf\",\"text\":\"text--59d9f9de\",\"selected\":\"selected--3b82c009\",\"active\":\"active--c30e4dc0\",\"disabled\":\"disabled--60b293f5\",\"open\":\"open--57a75e6f\"};","import { useBook, BaseConfig } from 'topwrite';\r\nimport { Config } from './config';\r\n\r\ndeclare const PLUGIN_NAME: string;\r\n\r\ndeclare module 'topwrite' {\r\n    export interface HookContext {\r\n        getConfig(): BaseConfig<Config>;\r\n    }\r\n}\r\n\r\nexport default function useConfig(): BaseConfig<Config> {\r\n    const { config } = useBook();\r\n\r\n    const schema = require('../config.json');\r\n\r\n    return config.getPluginConfig(PLUGIN_NAME, schema);\r\n};\r\n","import { Catalog, CatalogProps, Link } from 'topwrite';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport style from '../scss/summary.module.scss';\r\nimport { BsCaretDownFill } from '@react-icons/all-files/bs/BsCaretDownFill';\r\nimport { BsCaretRightFill } from '@react-icons/all-files/bs/BsCaretRightFill';\r\nimport classNames from 'classnames';\r\nimport useConfig from '@@/use-config';\r\n\r\nconst Item: CatalogProps['itemComponent'] = ({ item, active, disabled, activeDescendant, children }) => {\r\n    const config = useConfig();\r\n\r\n    const [open, setOpen] = useState(() => {\r\n        return config.getValue('auto_open') && item.level.getDepth() === 1 || activeDescendant;\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!open && activeDescendant) {\r\n            setOpen(true);\r\n        }\r\n    }, [activeDescendant]);\r\n\r\n    const handleSpaceClick = useCallback(() => {\r\n        if (children) {\r\n            setOpen(!open);\r\n        }\r\n    }, [open, children]);\r\n\r\n    return <li className={classNames({ [style.open]: open })}>\r\n        <div className={classNames(style.item, {\r\n            [style.active]: active,\r\n            [style.disabled]: disabled,\r\n        })} onClick={handleSpaceClick}>\r\n            <div className={style.whole} />\r\n            <span className={style.space}>\r\n                {children && (open ? <BsCaretDownFill size={12} /> : <BsCaretRightFill size={12} />)}\r\n            </span>\r\n            <Link className={style.text} to={item}>\r\n                {item.title}\r\n            </Link>\r\n        </div>\r\n        {children}\r\n    </li>;\r\n};\r\n\r\nconst Part: CatalogProps['partComponent'] = ({ part, children }) => {\r\n    return <div className={style.part}>\r\n        <div className={style.title}>\r\n            {part.title}\r\n        </div>\r\n        {children}\r\n    </div>;\r\n};\r\n\r\nexport default function Summary() {\r\n\r\n    return <div className={style.summary}>\r\n        <Catalog\r\n            partComponent={Part}\r\n            itemComponent={Item}\r\n        />\r\n    </div>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"search\":\"search--be318508\",\"results\":\"results--6f02af9f\",\"active\":\"active--85ea07bc\",\"empty\":\"empty--1648d2ff\"};","import { Link, useFile, useIntl, useModel } from 'topwrite';\r\nimport style from '../scss/search.module.scss';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport classNames from 'classnames';\r\nimport { BsSearch } from '@react-icons/all-files/bs/BsSearch';\r\n\r\nexport default function Search() {\r\n    const [{ status, results }] = useModel('search');\r\n    const { path: current } = useFile();\r\n\r\n    const intl = useIntl();\r\n\r\n    return <div className={style.search}>\r\n        {status === 'loading' && <Spinner animation='border' variant='success' />}\r\n\r\n        {results.length > 0 ?\r\n            <div className={style.results}>\r\n                <ul>\r\n                    {results.map((article) => {\r\n                        return <li className={classNames({ [style.active]: article.path === current })}\r\n                                   key={article.path}>\r\n                            <Link to={article.path}>{article.title}</Link>\r\n                        </li>;\r\n                    })}\r\n                </ul>\r\n            </div>\r\n            : <div className={style.empty}>\r\n                <BsSearch size={36} />\r\n                <p>{intl.formatMessage({ defaultMessage: '暂无相关搜索结果' })}</p>\r\n            </div>}\r\n    </div>;\r\n}\r\n","import style from '../scss/body.module.scss';\r\nimport Summary from '@/components/summary';\r\nimport { Link, Logo, PoweredBy, useIntl, useModel, useTitle } from 'topwrite';\r\nimport { useCallback, useMemo } from 'react';\r\nimport Search from '@/components/search';\r\nimport { debounce } from 'lodash';\r\nimport useConfig from '@@/use-config';\r\n\r\nexport default function Sidebar() {\r\n\r\n    const intl = useIntl();\r\n    const [{ query }, { fetch }] = useModel('search');\r\n    const config = useConfig();\r\n    const placeholder = intl.formatMessage({ defaultMessage: '请输入搜索关键词……' });\r\n\r\n    const title = useTitle();\r\n\r\n    const debounced = useMemo(() => debounce(fetch, 300), [fetch]);\r\n\r\n    const handleSearch = useCallback((e) => {\r\n        debounced(e.target.value);\r\n    }, [debounced]);\r\n\r\n    let body;\r\n    if (query) {\r\n        body = <Search />;\r\n    } else {\r\n        body = <Summary />;\r\n    }\r\n\r\n    return <div className={style.sidebar}>\r\n        <div className={style.header}>\r\n            {config.getValue('navs').length === 0 && <Link className={style.title} to='.'>\r\n                <Logo />\r\n                {title}\r\n            </Link>}\r\n            <div className={style.search}>\r\n                <input type='search' defaultValue={query} onChange={handleSearch} placeholder={placeholder} />\r\n            </div>\r\n        </div>\r\n        <div className={style.body}>\r\n            {body}\r\n        </div>\r\n        <PoweredBy className={style.copyright} />\r\n    </div>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"main--6aaec551\",\"toolbar\":\"toolbar--af3e5b9e\",\"content\":\"content--dbbad732\",\"navigation\":\"navigation--93943883\",\"prev\":\"prev--8f062b74\",\"next\":\"next--1623c556\"};","import {\r\n    Link,\r\n    useIntl,\r\n    useNextArticle,\r\n    usePrevArticle,\r\n    Article\r\n} from 'topwrite';\r\nimport style from '../scss/main.module.scss';\r\n\r\nexport default function Document() {\r\n\r\n    const intl = useIntl();\r\n\r\n    const prevArticle = usePrevArticle();\r\n    const nextArticle = useNextArticle();\r\n\r\n    return <div className={style.main}>\r\n        <Article\r\n            className={style.content}\r\n            footer={\r\n                <div className={style.navigation}>\r\n                    {prevArticle && <span className={style.prev}>\r\n                        {intl.formatMessage({ defaultMessage: '上一篇' })}:<Link\r\n                        to={prevArticle}>{prevArticle.title}</Link>\r\n                    </span>}\r\n                    {nextArticle && <span className={style.next}>\r\n                        {intl.formatMessage({ defaultMessage: '下一篇' })}:<Link\r\n                        to={nextArticle}>{nextArticle.title}</Link>\r\n                    </span>}\r\n                </div>}\r\n        />\r\n    </div>;\r\n}\r\n","import { useEffect } from 'react';\r\nimport style from '../scss/body.module.scss';\r\nimport Sidebar from '@/components/sidebar';\r\nimport { useFile, history, useArticle, useBook } from 'topwrite';\r\nimport Document from '@/components/document';\r\nimport classNames from 'classnames';\r\nimport useConfig from '@@/use-config';\r\n\r\nexport default function Body() {\r\n\r\n    const file = useFile();\r\n    const { summary } = useBook();\r\n    const config = useConfig();\r\n\r\n    const article = useArticle();\r\n\r\n    useEffect(() => {\r\n        if (!article) {\r\n            const firstPath = summary.getFirstPath();\r\n            if (firstPath) {\r\n                history.replace(file.relative(firstPath));\r\n            }\r\n        }\r\n    }, [article]);\r\n\r\n    if (!article) {\r\n        return null;\r\n    }\r\n\r\n    return <div className={classNames(\r\n        style.body,\r\n        style.withSidebar,\r\n        { [style.withHead]: config.getValue('navs').length > 0 })}\r\n    >\r\n        <Sidebar />\r\n        <Document />\r\n    </div>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"head\":\"head--058b913b\",\"title\":\"title--18735434\",\"navs\":\"navs--be057733\"};","import style from '../scss/head.module.scss';\r\nimport { NoName1 } from '@@/config';\r\nimport { Link, Logo, useBook, useTitle } from 'topwrite';\r\nimport path from 'path';\r\n\r\ninterface HeadProps {\r\n    navs: NoName1\r\n}\r\n\r\nexport default function Head({ navs }: HeadProps) {\r\n\r\n    const title = useTitle();\r\n    const { summary } = useBook();\r\n\r\n    if (navs.length > 0) {\r\n        return <div className={style.head}>\r\n            <Link className={style.title} to=\".\">\r\n                <Logo />\r\n                {title}\r\n            </Link>\r\n            <div className={style.navs}>\r\n                {navs.map((nav, index) => {\r\n                    if (!nav.url.startsWith('http') && path.extname(nav.url) === '.md') {\r\n                        const linkArticle = summary.getArticle(article => article.ref === nav.url);\r\n                        if (linkArticle) {\r\n                            return <Link key={index} to={linkArticle}>{nav.title}</Link>;\r\n                        }\r\n                    }\r\n                    return <a key={index} href={nav.url} target=\"_blank\">{nav.title}</a>;\r\n                })}\r\n            </div>\r\n        </div>;\r\n    }\r\n    return null;\r\n}\r\n","import Body from '@/components/body';\r\nimport Head from '@/components/head';\r\nimport '../scss/root.scss';\r\nimport useConfig from '@@/use-config';\r\nimport Loading from 'react-loading-bar';\r\nimport { useSelector, useThemeConfig } from 'topwrite';\r\n\r\nexport default function Root() {\r\n\r\n    const config = useConfig();\r\n    const { loading } = useSelector('page');\r\n    const { primaryColor } = useThemeConfig();\r\n\r\n    return <>\r\n        <Loading show={loading} color={primaryColor} />\r\n        <Head navs={config.getValue('navs')} />\r\n        <Body />\r\n    </>;\r\n}\r\n"],"names":["useConfig","config","useBook","schema","getPluginConfig","Item","item","active","disabled","activeDescendant","children","open","setOpen","useState","getValue","level","getDepth","useEffect","handleSpaceClick","useCallback","className","onClick","BsCaretDownFill","size","BsCaretRightFill","Link","to","title","Part","part","Summary","Catalog","partComponent","itemComponent","Search","status","results","useModel","path","current","useFile","intl","useIntl","Spinner","animation","variant","length","map","article","BsSearch","formatMessage","defaultMessage","Sidebar","query","fetch","placeholder","useTitle","debounced","useMemo","debounce","handleSearch","e","target","value","body","Logo","type","defaultValue","onChange","PoweredBy","Document","prevArticle","usePrevArticle","nextArticle","useNextArticle","Article","footer","Body","file","summary","useArticle","firstPath","getFirstPath","history","relative","Head","navs","nav","index","url","startsWith","linkArticle","getArticle","ref","href","Root","loading","useSelector","primaryColor","useThemeConfig","show","color"],"sourceRoot":""}